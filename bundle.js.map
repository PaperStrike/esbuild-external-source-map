{
  "version": 3,
  "sources": ["../src/InterceptRule.ts", "../src/AbortError.ts", "../src/Fetcher.ts", "../src/core.ts", "../src/index.ts", "node_modules/playwright-fixtures/dist/index.js"],
  "sourcesContent": [null, null, null, null, null, "/**\n * Resolve fixture values, and returns the resolved values,\n * a callback to start cleaning jobs, and the promises of the cleaning jobs.\n */\nconst prepareFixtures = async (base, init) => {\n    const extend = {};\n    // The cleaning starter, called after the inner test and all sub-level fixtures are finished.\n    let useResolve;\n    let usePromise;\n    await new Promise((construct) => {\n        usePromise = new Promise((resolve) => { useResolve = resolve; construct(); });\n    });\n    // The promises of the cleaning jobs.\n    const finishJobs = [];\n    // Resolve fixture values.\n    const prepareJobs = Object.entries(init)\n        .map(([key, fixtureValue]) => (new Promise((prepareValueResolve) => {\n        /**\n         * Check if it is callable.\n         * Hard to be reliable and fast at the same time.\n         * E.g., classes are functions, too.\n         */\n        if (typeof fixtureValue === 'function') {\n            const useValue = async (value) => {\n                extend[key] = value;\n                prepareValueResolve();\n                await usePromise;\n            };\n            finishJobs.push(\n            /**\n             * Package to promise, chain with another resolve in case of\n             * the fixture function finishes without using `useValue`.\n             *\n             * Specify the type of `extend` as `T` to allow users to use sibling fixtures\n             * as in Playwright's official docs.\n             * @TODO filter out constants before handling these fixture functions.\n             * @see [Test fixtures - Advanced: fixtures | Playwright]{@link https://playwright.dev/docs/test-fixtures/#overriding-fixtures}\n             */\n            Promise\n                .resolve(fixtureValue({ ...base, ...extend }, useValue))\n                .then(prepareValueResolve));\n        }\n        else {\n            extend[key] = fixtureValue;\n            prepareValueResolve();\n        }\n    })));\n    await Promise.all(prepareJobs);\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    return [{ ...base, ...extend }, useResolve, finishJobs];\n};\nconst wrapTest = (baseTest, fixturesList) => new Proxy(baseTest, {\n    // The call signature.\n    apply: (target, thisArg, [name, inner]) => (target.call(thisArg, name, async (...baseTestArgs) => {\n        const finishList = [];\n        const fixtures = await fixturesList.reduce(async (initializing, init) => {\n            const [initialized, finishFunc, finishJobs,] = await prepareFixtures(await initializing, init);\n            finishList.push([finishFunc, finishJobs]);\n            return initialized;\n        }, Promise.resolve({}));\n        // A try block to avoid inner errors blocking the cleaning jobs.\n        try {\n            await inner.call(thisArg, fixtures, ...baseTestArgs);\n        }\n        finally {\n            // Start the cleaning jobs, from sub-level fixtures to parent fixtures.\n            await finishList.reduceRight(async (finishing, [finishFunc, finishJobs]) => {\n                await finishing;\n                finishFunc();\n                await Promise.all(finishJobs);\n            }, Promise.resolve());\n        }\n    })),\n    get(target, key) {\n        if (key === 'extend') {\n            // The `extend` method.\n            return (fixtures) => wrapTest(baseTest, [...fixturesList, fixtures]);\n        }\n        return target[key];\n    },\n});\nconst wrap = (baseTest) => wrapTest(baseTest, []);\nexport default wrap;\n"],
  "mappings": "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",
  "names": []
}
